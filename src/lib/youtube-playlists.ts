// YouTube Playlist mappings for different subjects and classes
// Format: "Class-Subject" -> Playlist URL
// Reference: https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p

export const YOUTUBE_PLAYLISTS: Record<string, string> = {
  // Class 10
  "10-Mathematics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "10-Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Science playlist
  "10-English": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual English playlist
  "10-Hindi": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Hindi playlist
  "10-Social Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Social Science playlist
  "10-Physics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Physics playlist
  "10-Chemistry": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Chemistry playlist
  "10-Biology": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Biology playlist
  "10-Computer Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "10-Economics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "10-History": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "10-Geography": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "10-Political Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  
  // Class 9
  "9-Mathematics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p", // TODO: Update with actual Class 9 Maths playlist
  "9-Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "9-English": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "9-Hindi": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "9-Social Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  
  // Class 8
  "8-Mathematics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "8-Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "8-English": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "8-Hindi": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "8-Social Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  
  // Class 11
  "11-Mathematics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-Physics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-Chemistry": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-Biology": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-Economics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-History": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-Geography": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "11-Political Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  
  // Class 12
  "12-Mathematics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-Physics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-Chemistry": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-Biology": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-Economics": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-History": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-Geography": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
  "12-Political Science": "https://www.youtube.com/watch?v=sRZbjNtOflY&list=PLhG4nPx00XXqqmBl-AED0AK_tSRBHDu-p",
};

// Normalize subject names to match playlist keys
function normalizeSubject(subject: string): string {
  const subjectMap: Record<string, string> = {
    'math': 'Mathematics',
    'maths': 'Mathematics',
    'mathematics': 'Mathematics',
    'science': 'Science',
    'english': 'English',
    'hindi': 'Hindi',
    'social science': 'Social Science',
    'social': 'Social Science',
    'social studies': 'Social Science',
    'physics': 'Physics',
    'chemistry': 'Chemistry',
    'biology': 'Biology',
    'computer science': 'Computer Science',
    'computer': 'Computer Science',
    'economics': 'Economics',
    'history': 'History',
    'geography': 'Geography',
    'political science': 'Political Science',
    'civics': 'Political Science',
  };
  
  const normalized = subjectMap[subject.toLowerCase()] || subject;
  return normalized;
}

// Normalize class level (remove "Class" prefix, handle "10th", etc.)
function normalizeClass(classLevel: string): string {
  if (!classLevel) return '';
  
  // Remove "Class" prefix if present
  let normalized = classLevel.replace(/^class\s+/i, '').trim();
  
  // Remove "th", "st", "nd", "rd" suffixes
  normalized = normalized.replace(/(\d+)(th|st|nd|rd)/i, '$1');
  
  return normalized.trim();
}

export function getPlaylistUrl(classLevel: string, subject: string): string | null {
  if (!classLevel || !subject) {
    if (import.meta.env.DEV) {
      console.warn('getPlaylistUrl: Missing classLevel or subject', { classLevel, subject });
    }
    return null;
  }
  
  const normalizedClass = normalizeClass(classLevel);
  const normalizedSubject = normalizeSubject(subject);
  const key = `${normalizedClass}-${normalizedSubject}`;
  
  if (import.meta.env.DEV) {
    console.log('Looking up playlist:', { classLevel, subject, normalizedClass, normalizedSubject, key });
  }
  
  const playlistUrl = YOUTUBE_PLAYLISTS[key] || null;
  
  if (!playlistUrl && import.meta.env.DEV) {
    console.warn('Playlist not found for key:', key, 'Available keys:', Object.keys(YOUTUBE_PLAYLISTS));
  }
  
  return playlistUrl;
}

// Get playlist ID from URL
export function getPlaylistId(url: string): string | null {
  const match = url.match(/[?&]list=([a-zA-Z0-9_-]+)/);
  return match ? match[1] : null;
}

// Convert playlist URL to embed URL
export function getPlaylistEmbedUrl(url: string): string {
  const playlistId = getPlaylistId(url);
  if (playlistId) {
    return `https://www.youtube.com/embed/videoseries?list=${playlistId}`;
  }
  
  // If it's a regular video URL, extract video ID
  const videoIdMatch = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
  if (videoIdMatch) {
    return `https://www.youtube.com/embed/${videoIdMatch[1]}`;
  }
  
  return url;
}

